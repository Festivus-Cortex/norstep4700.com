/**
 * Audio Control Panel Styles
 *
 * Main container for the entire audio control interface.
 * Responsive positioning: below navbar on desktop, above navbar on mobile.
 */

/**
 * Desktop container (>768px).
 * Fixed positioning - absolutely locked, no dynamic calculations.
 */
.desktopContainer {
  /* Fixed position locked to viewport - NEVER changes */
  position: fixed !important;
  top: 90px !important; /* Spacer (16px) + Header (80px) - 10px adjustment */
  left: 0px !important;
  right: 0px !important;
  bottom: auto !important;
  z-index: 8 !important; /* Above page content, below navbar (zIndex 9) */
  padding: 0 var(--static-space-16) !important;
  margin: 0 !important;
  pointer-events: none !important;
  display: flex !important;
  justify-content: center !important;
  width: 100% !important;
  height: auto !important;

  /* Start hidden for fade-in animation */
  opacity: 0;
  /* ONLY transition opacity - nothing else */
  transition-property: opacity !important;
  transition-duration: 1.5s !important;
  transition-timing-function: ease-in-out !important;
  /* Lock to GPU layer on its own compositing layer */
  transform: translateZ(0) !important;

  /* Children can receive pointer events */
  > * {
    pointer-events: auto !important;
  }

  /* Fade in when visible */
  &.visible {
    opacity: 1 !important;
  }
}

/* Hide on mobile */
@media (--s) {
  .desktopContainer {
    display: none !important;
  }
}

/**
 * Mobile container (â‰¤768px).
 * Positioned above the fixed bottom navbar, overlays content when expanded.
 */
.mobileContainer {
  /* Positioned just above navbar with minimal gap */
  margin-bottom: calc(var(--static-space-80) + var(--static-space-4));
  padding: 0 var(--static-space-16); /* Horizontal padding for alignment */
  pointer-events: none; /* Allow clicks to pass through to content below */

  /* Start hidden for fade-in animation */
  opacity: 0;
  transition: opacity 1.5s ease-in-out;

  /* Only the panel itself should be interactive */
  > * {
    pointer-events: auto;
  }

  /* Fade in when visible */
  &.visible {
    opacity: 1;
  }
}

/**
 * Panel content container (shown when expanded).
 * Scrollable if content exceeds viewport height.
 */
.panel {
  box-shadow: var(--shadow-l); /* Large elevation for prominence */
  max-height: 80vh; /* Limit height to 80% of viewport */
  overflow-y: auto; /* Scroll if content is too tall */

  /* Animate panel appearance when expanding */
  &.expanded {
    animation: expandPanel var(--transition-duration-macro-medium)
      var(--transition-eased);
  }
}

/**
 * Expand animation keyframes.
 * Smooth fade-in and slide-down effect.
 *
 * Duration: macro-medium (typically 300-400ms)
 * Easing: eased (smooth acceleration/deceleration)
 */
@keyframes expandPanel {
  from {
    opacity: 0; /* Start invisible */
    transform: translateY(-8px); /* Start slightly above */
  }
  to {
    opacity: 1; /* Fade to visible */
    transform: translateY(0); /* Slide to final position */
  }
}

/**
 * Mobile adjustments
 * Reduce max height to leave more room for page content
 */
@media (--s) {
  .panel {
    max-height: 70vh; /* Reduced from 80vh */
  }
}
